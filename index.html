<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Shadowing Master</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #f3f4f6; overflow-x: hidden; }
        .player-box { position: relative; padding-bottom: 56.25%; height: 0; background: #000; border-radius: 1.5rem; overflow: hidden; }
        .player-box iframe { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; }
        .btn-active { background-color: #4f46e5 !important; color: white !important; }
    </style>
</head>
<body class="p-4 md:p-8 flex flex-col items-center">

    <div class="w-full max-w-md bg-white rounded-[2rem] shadow-xl p-6 border border-gray-100">
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-2xl font-black text-indigo-900">Shadowing Pro ğŸ™ï¸</h1>
            <p class="text-gray-500 text-xs mt-1">ØªØ¯Ø±Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø­Ø§ÙƒØ§Ø© Ø¨Ø¶ØºØ·Ø© Ø²Ø±</p>
        </div>

        <!-- Controls -->
        <div class="grid grid-cols-2 gap-3 mb-6">
            <select id="lvl" onchange="loadNew()" class="bg-gray-50 border-none rounded-xl p-3 text-sm font-bold text-gray-700 ring-1 ring-gray-200">
                <option value="Beginner">Ù…Ø¨ØªØ¯Ø¦</option>
                <option value="Intermediate" selected>Ù…ØªÙˆØ³Ø·</option>
                <option value="Advanced">Ù…ØªÙ‚Ø¯Ù…</option>
            </select>
            <select id="spd" onchange="updateSpd()" class="bg-gray-50 border-none rounded-xl p-3 text-sm font-bold text-gray-700 ring-1 ring-gray-200">
                <option value="0.5">0.5x (Ø¨Ø·ÙŠØ¡)</option>
                <option value="0.75">0.75x</option>
                <option value="1" selected>Ø·Ø¨ÙŠØ¹ÙŠ</option>
            </select>
        </div>

        <!-- Player -->
        <div class="player-box shadow-lg mb-6">
            <div id="player"></div>
        </div>

        <!-- Text -->
        <div id="textArea" class="hidden bg-indigo-50 border-r-4 border-indigo-600 p-4 rounded-xl mb-6">
            <p id="phrase" class="text-lg font-bold text-indigo-900 leading-relaxed italic"></p>
        </div>

        <!-- Buttons -->
        <div class="space-y-3">
            <button onclick="loadNew()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-2xl text-xl transition active:scale-95 shadow-lg flex items-center justify-center gap-2">
                Ø¬Ù…Ù„Ø© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© â¯
            </button>
            <div class="grid grid-cols-2 gap-3">
                <button onclick="replay()" class="bg-emerald-500 text-white font-bold py-3 rounded-xl active:scale-95 transition">Ø¥Ø¹Ø§Ø¯Ø© ğŸ”</button>
                <button id="viewBtn" onclick="toggle()" class="bg-gray-800 text-white font-bold py-3 rounded-xl active:scale-95 transition">Ø§Ù„Ù†Øµ ğŸ“</button>
            </div>
        </div>

        <p id="msg" class="text-center text-[10px] text-gray-300 mt-6 uppercase tracking-widest">System Ready</p>
    </div>

    <script>
        const data = [
            { id: 'h79pgvz9L6Y', s: 10, e: 13, lvl: 'Beginner', txt: "It's a pleasure to meet you and welcome to our city." },
            { id: '8S0FDjFBj8o', s: 45, e: 49, lvl: 'Intermediate', txt: "We need to rethink the way we build our cities for the future." },
            { id: 'L-670_mTH3U', s: 45, e: 50, lvl: 'Intermediate', txt: "Don't forget to practice your pronunciation every single day." },
            { id: 'W6OaH-G92S4', s: 50, e: 56, lvl: 'Advanced', txt: "The architectural significance of this building cannot be overstated." },
            { id: 'LXb3EKWsInQ', s: 30, e: 35, lvl: 'Advanced', txt: "The geopolitical situation is becoming increasingly volatile." }
        ];

        let player, cur, timer;

        function onYouTubeIframeAPIReady() {
            player = new YT.Player('player', {
                playerVars: { 'autoplay': 0, 'controls': 0, 'modestbranding': 1, 'rel': 0, 'playsinline': 1 },
                events: { 'onReady': () => loadNew() }
            });
        }

        function loadNew() {
            clearInterval(timer);
            const lvl = document.getElementById('lvl').value;
            const filtered = data.filter(i => i.lvl === lvl);
            cur = filtered[Math.floor(Math.random() * filtered.length)];

            document.getElementById('textArea').classList.add('hidden');
            document.getElementById('viewBtn').innerText = "Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Øµ ğŸ“";
            document.getElementById('phrase').innerText = cur.txt;

            player.loadVideoById({ videoId: cur.id, startSeconds: cur.s });
            updateSpd();
            startWatch();
        }

        function startWatch() {
            timer = setInterval(() => {
                if (player && player.getCurrentTime() >= cur.e) {
                    player.pauseVideo();
                    clearInterval(timer);
                }
            }, 100);
        }

        function replay() {
            clearInterval(timer);
            player.seekTo(cur.s);
            player.playVideo();
            startWatch();
        }

        function updateSpd() {
            const s = parseFloat(document.getElementById('spd').value);
            if (player && player.setPlaybackRate) player.setPlaybackRate(s);
        }

        function toggle() {
            const t = document.getElementById('textArea');
            const b = document.getElementById('viewBtn');
            if (t.classList.contains('hidden')) {
                t.classList.remove('hidden');
                b.innerText = "Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ ğŸ‘ï¸";
            } else {
                t.classList.add('hidden');
                b.innerText = "Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Øµ ğŸ“";
            }
        }
    </script>
</body>

</html>
